---
import type { Lang } from '../../i18n/translations';
import { faqItems } from '../../data/faq';

interface Props {
  t: Record<string, string>;
  lang?: Lang;
}

const { t, lang = 'en' } = Astro.props;
const previewItems = faqItems.slice(0, 5);
const faqHref = lang === 'en' ? '/faq/' : `/${lang}/faq/`;
---

<section class="mx-auto max-w-4xl px-4 py-16 sm:py-24">
  <div class="mb-10 text-center reveal">
    <h2 class="text-2xl font-bold tracking-tight sm:text-3xl">{t["faq.title"]}</h2>
    <p class="mt-3 text-text-secondary">{t["faq.subtitle"]}</p>
  </div>

  <div class="space-y-3 reveal-group">
    {previewItems.map((item) => (
      <details class="reveal group rounded-lg border border-border bg-surface transition-colors hover:border-border-hover">
        <summary class="flex cursor-pointer items-center justify-between px-6 py-4 font-medium select-none">
          <span>{item.question[lang]}</span>
          <svg
            class="h-5 w-5 shrink-0 text-text-tertiary transition-transform group-open:rotate-180"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </summary>
        <div class="px-6 pb-4 text-text-secondary leading-relaxed">
          {item.answer[lang]}
        </div>
      </details>
    ))}
  </div>

  <div class="mt-8 text-center reveal">
    <a
      href={faqHref}
      class="inline-flex items-center gap-2 text-accent hover:text-accent-hover transition-colors font-medium"
    >
      {t["faq.seeAll"]}
      <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
      </svg>
    </a>
  </div>
</section>
